import{r as e,al as t,z as s,A as a,R as n,J as o,B as r,Q as l,a4 as i,u as c,T as d,M as u,O as m,P as p,ax as f,ay as v,au as h,az as g}from"./vue-vendor-344504bc.js";import{E as y,a as _,l as b,v as w,r as E,b as k,s as L,i as O}from"./element-plus-ba159363.js";import{a as T}from"./utils-926e52e0.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const P=(e,t)=>{const s=e.__vccOpts||e;for(const[a,n]of t)s[a]=n;return s},C={class:"app-container"},x={class:"header-left"},j={class:"nav-tabs"},A={class:"header-right"},S=["disabled"],I=["disabled"],B=["disabled"],N={key:0,class:"status-banner"},R=P({__name:"App",setup(f){const v=e(!1),h=[{path:"/overview",label:"总览"},{path:"/strategy",label:"策略配置"},{path:"/logs",label:"运行日志"}],g=async()=>{try{const e=await T.post("/api/strategy/start");e.data.success?(v.value=!0,y.success("策略启动成功")):y.error(e.data.message||"策略启动失败")}catch(e){y.error("启动失败: "+e.message)}},O=async()=>{try{(await T.post("/api/strategy/stop")).data.success&&(v.value=!1,y.success("策略已停止"))}catch(e){y.error("停止失败: "+e.message)}},P=async()=>{try{await O(),setTimeout(async()=>{await g()},1e3)}catch(e){y.error("重启失败: "+e.message)}},R=async()=>{try{await _.confirm("确定要终止整个程序吗？这将关闭后端服务和前端界面。","终止程序",{confirmButtonText:"确定终止",cancelButtonText:"取消",type:"warning",distinguishCancelAndClose:!0});const t=y({message:"正在关闭程序...",type:"info",duration:0,icon:b});try{await T.post("/api/shutdown",{},{timeout:2e3})}catch(e){}t.close(),y.success({message:"程序已终止，页面将在3秒后关闭",duration:3e3}),setTimeout(()=>{window.close(),setTimeout(()=>{document.body.innerHTML='<div style="display: flex; align-items: center; justify-content: center; height: 100vh; background: #000; color: #fff; font-size: 24px; font-family: sans-serif;">程序已终止，您可以关闭此页面</div>'},500)},3e3)}catch(e){"cancel"!==e&&"close"!==e&&y.error("终止失败: "+e.message)}};return(e,f)=>{const y=t("router-link"),_=t("el-icon"),b=t("el-header"),T=t("router-view"),V=t("el-main"),z=t("el-container");return s(),a("div",C,[n(z,null,{default:o(()=>[n(b,{class:"header"},{default:o(()=>[r("div",x,[f[0]||(f[0]=r("div",{class:"logo"},[r("div",{class:"logo-icon"},"₿"),r("span",{class:"logo-text"},"量化交易平台")],-1)),r("div",j,[(s(),a(l,null,i(h,e=>n(y,{key:e.path,to:e.path,class:"nav-tab","active-class":"active"},{default:o(()=>[m(p(e.label),1)]),_:2},1032,["to"])),64))])]),r("div",A,[r("button",{class:"action-btn success",onClick:g,disabled:v.value},[n(_,null,{default:o(()=>[n(c(w))]),_:1}),f[1]||(f[1]=r("span",null,"启动",-1))],8,S),r("button",{class:"action-btn warning",onClick:P,disabled:!v.value},[n(_,null,{default:o(()=>[n(c(E))]),_:1}),f[2]||(f[2]=r("span",null,"重启",-1))],8,I),r("button",{class:"action-btn info",onClick:O,disabled:!v.value},[n(_,null,{default:o(()=>[n(c(k))]),_:1}),f[3]||(f[3]=r("span",null,"停止",-1))],8,B),r("button",{class:"action-btn danger",onClick:R},[n(_,null,{default:o(()=>[n(c(L))]),_:1}),f[4]||(f[4]=r("span",null,"终止",-1))])])]),_:1}),n(V,{class:"main-content"},{default:o(()=>[n(d,{name:"fade-slide",mode:"out-in"},{default:o(()=>[v.value?(s(),a("div",N,[...f[5]||(f[5]=[r("div",{class:"status-content"},[r("div",{class:"status-indicator"}),r("span",{class:"status-text"},"策略运行中"),r("span",{class:"status-tag"},"系统自动加载最新保存的策略")],-1)])])):u("",!0)]),_:1}),n(d,{name:"fade-slide",mode:"out-in"},{default:o(()=>[n(T)]),_:1})]),_:1})]),_:1})])}}},[["__scopeId","data-v-3639d7f8"]]),V={},z=function(e,t,s){if(!t||0===t.length)return e();const a=document.getElementsByTagName("link");return Promise.all(t.map(e=>{if((e=function(e){return"/"+e}(e))in V)return;V[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(!!s)for(let s=a.length-1;s>=0;s--){const n=a[s];if(n.href===e&&(!t||"stylesheet"===n.rel))return}else if(document.querySelector(`link[href="${e}"]${n}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":"modulepreload",t||(o.as="script",o.crossOrigin=""),o.href=e,document.head.appendChild(o),t?new Promise((t,s)=>{o.addEventListener("load",t),o.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${e}`)))}):void 0})).then(()=>e()).catch(e=>{const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e})},D=[{path:"/",redirect:"/overview"},{path:"/overview",name:"Overview",component:()=>z(()=>import("./Overview-8486b93a.js"),["js/Overview-8486b93a.js","js/vue-vendor-344504bc.js","js/element-plus-ba159363.js","js/utils-926e52e0.js","js/echarts-e73e11b1.js","css/Overview-1901dafa.css"]),meta:{title:"总览"}},{path:"/strategy",name:"Strategy",component:()=>z(()=>import("./StrategyConfig-e0086cd7.js"),["js/StrategyConfig-e0086cd7.js","js/vue-vendor-344504bc.js","js/element-plus-ba159363.js","js/utils-926e52e0.js","js/codemirror-9b3543c5.js","css/StrategyConfig-0e7cb8c6.css"]),meta:{title:"策略配置"}},{path:"/logs",name:"Logs",component:()=>z(()=>import("./LogView-0ce1159c.js"),["js/LogView-0ce1159c.js","js/utils-926e52e0.js","js/element-plus-ba159363.js","js/vue-vendor-344504bc.js","css/LogView-0e396bce.css"]),meta:{title:"运行日志"}}],M=f({history:v(),routes:D}),$=h(R),q=g();document.documentElement.classList.add("dark"),$.use(q),$.use(M),$.use(O),$.mount("#app");export{P as _};
